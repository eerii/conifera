(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(38)},38:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(13),c=n.n(r),u=n(2),i=n(3),l=n(4),m=n.n(l),s="/api/persons",f=function(){return m.a.get(s).then((function(e){return e.data}))},d=function(e){return m.a.post(s,e).then((function(e){return e.data}))},h=function(e,t){return m.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},b=function(e){return m.a.delete(s+"/"+e)},v=function(e){var t=e.contacts,n=e.setContacts,r=e.setNotification,c=e.timeout,l=e.setTheTimeout,m=Object(a.useState)(""),s=Object(u.a)(m,2),f=s[0],b=s[1],v=Object(a.useState)(""),E=Object(u.a)(v,2),p=E[0],T=E[1];return o.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),t.map((function(e){return e.name.toLowerCase()})).includes(f.toLowerCase())){var a=Object.keys(t).find((function(e){return t[e].name.toLowerCase()===f.toLowerCase()}));if(t[a].number!==p){if(window.confirm("".concat(f," is already in your phonebook. Do you want to change the old number ").concat(t[a].number," for this new number ").concat(p,"?"))){var o=Object(i.a)(Object(i.a)({},t[a]),{},{number:p});h(o.id,o).then((function(e){n(t.map((function(t){return t.id!==o.id?t:e}))),r([!1,"The entry for ".concat(f," was updated")]),c&&clearTimeout(c)})).catch((function(e){r([!0,"The entry for ".concat(f," has been removed from the server")]),c&&clearTimeout(c),n(t.filter((function(e){return e.id!==o.id})))}))}}else r([!0,"Your phonebook already includes ".concat(f)]),c&&clearTimeout(c)}else{d({name:f,number:p}).then((function(e){n(t.concat(e)),r([!1,"".concat(f," has been added to your phonebook!")]),c&&clearTimeout(c)}))}b(""),T(""),l(setTimeout((function(){r([!1,""])}),3e3))}},o.a.createElement("div",null,"Name: ",o.a.createElement("input",{value:f,onChange:function(e){b(e.target.value)}})),o.a.createElement("div",null,"Phone Number: ",o.a.createElement("input",{value:p,onChange:function(e){T(e.target.value)}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"Add Contact")))},E=function(e){var t=e.searchVal,n=e.setSearchVal;return o.a.createElement("div",null,"Search: ",o.a.createElement("input",{value:t,onChange:function(e){return n(e.target.value)}}))},p=function(e){var t=e.name,n=e.id,a=e.contacts,r=e.setContacts,c=e.contactName,u=e.setNotification,i=e.timeout,l=e.setTheTimeout;return o.a.createElement("button",{onClick:function(e){return window.confirm("Do you really want to delete ".concat(c,"?"))&&b(n).then((function(){u([!0,"The entry for ".concat(c," has been removed from the server")]),i&&clearTimeout(i),r(a.filter((function(e){return e.id!==n})))})).catch((function(e){u([!0,"The entry for ".concat(c," has already been removed from the server")]),i&&clearTimeout(i),r(a.filter((function(e){return e.id!==n})))})),void l(setTimeout((function(){u([!1,""])}),3e3))}},t)},T=function(e){var t=e.name,n=e.number;return o.a.createElement("p",null,t,": ",n)},j=function(e){var t=e.contacts,n=e.setContacts,a=e.search,r=e.setNotification,c=e.timeout,u=e.setTheTimeout,i=t.filter((function(e){return e.name.toLowerCase().includes(a.toLowerCase())}));return o.a.createElement("div",null,i.map((function(e){return o.a.createElement("div",{key:e.id},o.a.createElement(T,{name:e.name,number:e.number}),o.a.createElement(p,{name:"Delete",id:e.id,contacts:t,setContacts:n,contactName:e.name,setNotification:r,timeout:c,setTheTimeout:u}))})))},w=function(e){var t=e.error,n=e.message,a={color:"white",background:"green",fontSize:16,borderRadius:5,padding:10,marginBottom:10},r=Object(i.a)(Object(i.a)({},a),{},{background:"red"});return n?o.a.createElement("div",{style:t?r:a},n):null},C=function(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(u.a)(c,2),l=i[0],m=i[1],s=Object(a.useState)([!1,""]),d=Object(u.a)(s,2),h=d[0],b=d[1],p=Object(a.useState)(null),T=Object(u.a)(p,2),C=T[0],O=T[1];return Object(a.useEffect)((function(){f().then((function(e){r(e)}))}),[]),o.a.createElement("div",null,o.a.createElement("h1",null,"Phonebook"),o.a.createElement(w,{error:h[0],message:h[1]}),o.a.createElement("h3",null,"Add New"),o.a.createElement(v,{contacts:n,setContacts:r,setNotification:b,timeout:C,setTheTimeout:O}),o.a.createElement("h3",null,"Contacts"),o.a.createElement(E,{searchVal:l,setSearchVal:m}),o.a.createElement(j,{contacts:n,setContacts:r,search:l,setNotification:b,timeout:C,setTheTimeout:O}))};c.a.render(o.a.createElement(C,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.75eca459.chunk.js.map